import { Meta } from "@storybook/blocks";
import ComponentsIcon from "./../../assets/components-icon.svg";

<Meta title="@UFE-Base/Components/Configuration Manager" />

<div>

    <div className="sb-icon">
        <img
            src={ComponentsIcon}
            alt="Components icon"/>
    </div>

    # Configuration Manager

    The **Configuration Manager** component is designed to fetch, store, and provide access to configurations specific to different components within an application.<br/>
    This component facilitates the retrieval of configuration data, allowing for dynamic adjustments based on the configurations fetched.

    We present in the code below an example of how to import and use the component.

    ```jsx
    import React from 'react';
    import { ConfigurationProvider } from '@ufe/base';

    function App() {
        return (
            <ConfigurationProvider 
                componentName={'exampleComponent'}>
                {children}
            </ConfigurationProvider>
        );
    }
    ```

    <div>
        <p className="sb-tag-warning">
            WARNING
        </p>
       This component has dependencies that it loads asynchronously. To achieve this a loading is used, by default it uses a plain "...loading" string, for a better loading please import the [Page Loader Provider](/docs/ufe-base-components-page-loader-providerr--docs) and set it as a parent of this provider.

       This will also allow you to have a single component for the loading of your application.

       ```jsx
        import React from 'react';
        import { ConfigurationProvider, PageLoaderProvider } from '@ufe/base';

        function App() {
            return (
                <PageLoaderProvider>
                    <ConfigurationProvider 
                        componentName={'exampleComponent'}>
                        {children}
                    </ConfigurationProvider>
                </PageLoaderProvider>
            );
        }
        ```
    </div>

    <div>
        <p className="sb-tag-important">
            IMPORTANT
        </p>
        The target used to fetch the configurations will be `ufe.components.{componentName}`<br/>
        If the optional prop url is used, the fetch will be attempted at that url.
    </div> 

    <br/>

    This document also presents information about:

    - [Props](#props)
    - [Functions](#functions)

    <br/>
    <br/>

    ## Props

    The component has the following parameters: 

    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Default</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**children***</td>
                <td> Child components that will be covered by configuration manager </td>
                <td> ```ReactNode``` </td>
                <td> - </td>
            </tr>
            <tr>
                <td>**componentName***</td>
                <td> The name of the component for which configurations are fetched. `ufe.components.{componentName}`. </td>
                <td> ```string``` </td>
                <td> - </td>
            </tr>
            <tr>
                <td>**url**</td>
                <td> The full URL that will attempt to fetch the configurations. </td>
                <td> ```string``` </td>
                <td> - </td>
            </tr>
        </tbody>
    </table>

    <br />
    <br />

    ## Functions

    The component exports two functions **get** and **getKeys**. 
    In this section we explain what each function consists and how they can be used.

    ### get
    
    **```get```** function returns the value of a specific configuration.


    The function has the following parameters: 

    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Default</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**key***</td>
                <td> The key of the configuration to retrieve. </td>
                <td> ```string``` </td>
                <td> - </td>
            </tr>
        </tbody>
    </table>

    In the example below we show how it is possible to call this function.

    ```js
    import { useConfiguration } from '@ufe/base';

    function myComponent(){
        const configurations = useConfiguration();
        const value = configurations.get('someKey');
    }
    ```



    ### getKeys

    **```getKeys```** function returns an array of all configuration keys.

    In the example below we show how it is possible to call this function.

    ```js
    import { useConfiguration } from '@ufe/base';

    function myComponent(){
        const configurations = useConfiguration();
        const keys = configurations.getKeys();
    }
    ```


</div>

<style>
  {`
    a{
        color: #BE63FF !important;
        font-weight: bold;
    }
    a:hover{
        color: #7F42AB !important;
    }
    table{
        width: 100%;
    }
    thead tr{
        border: none !important;
        background: #fff;
    }
    thead th{
        border: none !important;
        color: #6c6c6c !important;
    }
    tbody{
        box-shadow: 1px 1px 6px 1px #dedede;
    }
    tbody td{
        text-align: center;
        border: none !important;
        background: #fff;
        height: 30px;
        color: #333;
    }
    .sb-tag-container{
        display: flex;
        flex-direction: column;
        border-left: 1px solid #E5E5E5;
        padding: 16px 0px 16px 16px;
        gap: 12px;
    }
    .sb-tag-container p {
        margin: 0px;
        color: #8E8E8E;
    }
    .sb-tag-important p {
        background: #FF5B4D;
        width: fit-content;
        color: #fff !important;
        padding: 0px 16px;
        border-radius: 8px;
        font-weight: bold;
        margin: 0;
    }
    .sb-tag-warning p {
        background: #FF9D47;
        width: fit-content;
        color: #fff !important;
        padding: 0px 16px;
        border-radius: 8px;
        font-weight: bold;
        margin: 0;
    }
    .sb-icon {
        background: #FBF6FF;
        height: 60px;
        width: 60px;
        border-radius: 8px;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .sb-icon img {
        width: 32px;
    }
 `}
</style>
